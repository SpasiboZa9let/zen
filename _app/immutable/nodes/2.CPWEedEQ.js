import"../chunks/DsnmJJEf.js";import{i as z}from"../chunks/DclgByHV.js";import{e as re,s as de,o as te}from"../chunks/Dea9AHSg.js";import{a6 as ne,al as _e,Z as L,a8 as y,T as he,_ as pe,b as N,i as me,an as ge,ao as Ee,ap as W,Y as F,$ as q,U as Ae,a0 as ye,a7 as K,as as Te,aq as be,aB as we,ax as B,aC as X,a4 as le,Q as Ce,aD as Me,at as se,au as Ne,aE as Ie,aF as xe,aG as Y,aH as ie,W as De,aI as He,a3 as Re,aJ as qe,h as Be,B as S,a as O,A as J,aK as P,aL as Oe,C as k,E as Q,e as x,y as j,G as U,F as fe,f as Se,H as $}from"../chunks/fEDjoLzM.js";import{p as V}from"../chunks/CpShWO5t.js";function Le(r,t){return t}function Fe(r,t,e){for(var a=r.items,n=[],s=t.length,l=0;l<s;l++)He(t[l].e,n,!0);var f=s>0&&n.length===0&&e!==null;if(f){var d=e.parentNode;Re(d),d.append(e),a.clear(),C(r,t[0].prev,t[s-1].next)}qe(n,()=>{for(var u=0;u<s;u++){var m=t[u];f||(a.delete(m.k),C(r,m.prev,m.next)),ie(m.e,!f)}})}function Ye(r,t,e,a,n,s=null){var l=r,f={flags:t,items:new Map,first:null};{var d=r;l=y?L(he(d)):d.appendChild(ne())}y&&pe();var u=null,m=!1,g=new Map,i=me(()=>{var c=e();return Ce(c)?c:c==null?[]:le(c)}),_,v;function o(){$e(v,_,f,g,l,n,t,a,e),s!==null&&(_.length===0?u?se(u):u=K(()=>s(l)):u!==null&&Ne(u,()=>{u=null}))}_e(()=>{v??=Be,_=N(i);var c=_.length;if(m&&c===0)return;m=c===0;let T=!1;if(y){var b=ge(l)===Ee;b!==(c===0)&&(l=W(),L(l),F(!1),T=!0)}if(y){for(var h=null,E,p=0;p<c;p++){if(q.nodeType===Ae&&q.data===ye){l=q,T=!0,F(!1);break}var M=_[p],w=a(M,p);E=Z(q,f,h,null,M,w,p,n,t,e),f.items.set(w,E),h=E}c>0&&L(W())}if(y)c===0&&s&&(u=K(()=>s(l)));else if(Te()){var I=new Set,A=be;for(p=0;p<c;p+=1){M=_[p],w=a(M,p);var D=f.items.get(w)??g.get(w);D?ue(D,M,p):(E=Z(null,f,null,null,M,w,p,n,t,e,!0),g.set(w,E)),I.add(w)}for(const[H,R]of f.items)I.has(H)||A.skipped_effects.add(R.e);A.add_callback(o)}else o();T&&F(!0),N(i)}),y&&(l=q)}function $e(r,t,e,a,n,s,l,f,d){var u=t.length,m=e.items,g=e.first,i=g,_,v=null,o=[],c=[],T,b,h,E;for(E=0;E<u;E+=1){if(T=t[E],b=f(T,E),h=m.get(b),h===void 0){var p=a.get(b);if(p!==void 0){a.delete(b),m.set(b,p);var M=v?v.next:i;C(e,v,p),C(e,p,M),G(p,M,n),v=p}else{var w=i?i.e.nodes_start:n;v=Z(w,e,v,v===null?e.first:v.next,T,b,E,s,l,d)}m.set(b,v),o=[],c=[],i=v.next;continue}if(ue(h,T,E),(h.e.f&Y)!==0&&se(h.e),h!==i){if(_!==void 0&&_.has(h)){if(o.length<c.length){var I=c[0],A;v=I.prev;var D=o[0],H=o[o.length-1];for(A=0;A<o.length;A+=1)G(o[A],I,n);for(A=0;A<c.length;A+=1)_.delete(c[A]);C(e,D.prev,H.next),C(e,v,D),C(e,H,I),i=I,v=H,E-=1,o=[],c=[]}else _.delete(h),G(h,i,n),C(e,h.prev,h.next),C(e,h,v===null?e.first:v.next),C(e,v,h),v=h;continue}for(o=[],c=[];i!==null&&i.k!==b;)(i.e.f&Y)===0&&(_??=new Set).add(i),c.push(i),i=i.next;if(i===null)continue;h=i}o.push(h),v=h,i=h.next}if(i!==null||_!==void 0){for(var R=_===void 0?[]:le(_);i!==null;)(i.e.f&Y)===0&&R.push(i),i=i.next;var ve=R.length;if(ve>0){var oe=u===0?n:null;Fe(e,R,oe)}}r.first=e.first&&e.first.e,r.last=v&&v.e;for(var ce of a.values())ie(ce.e);a.clear()}function ue(r,t,e,a){we(r.v,t),r.i=e}function Z(r,t,e,a,n,s,l,f,d,u,m){var g=(d&Ie)!==0,i=(d&xe)===0,_=g?i?B(n,!1,!1):X(n):n,v=(d&Me)===0?l:X(l),o={i:v,v:_,k:s,a:null,e:null,prev:e,next:a};try{if(r===null){var c=document.createDocumentFragment();c.append(r=ne())}return o.e=K(()=>f(r,_,v,u),y),o.e.prev=e&&e.e,o.e.next=a&&a.e,e===null?m||(t.first=o):(e.next=o,e.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function G(r,t,e){for(var a=r.next?r.next.e.nodes_start:e,n=t?t.e.nodes_start:e,s=r.e.nodes_start;s!==null&&s!==a;){var l=De(s);n.before(s),s=l}}function C(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const ee=[...` 	
\r\f \v\uFEFF`];function Ge(r,t,e){var a=""+r;if(e){for(var n in e)if(e[n])a=a?a+" "+n:n;else if(a.length)for(var s=n.length,l=0;(l=a.indexOf(n,l))>=0;){var f=l+s;(l===0||ee.includes(a[l-1]))&&(f===a.length||ee.includes(a[f]))?a=(l===0?"":a.substring(0,l))+a.substring(f+1):l=f}}return a===""?null:a}function Ke(r,t){return r==null?null:String(r)}function Ue(r,t,e,a,n,s){var l=r.__className;if(y||l!==e||l===void 0){var f=Ge(e,a,s);(!y||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):r.className=f),r.__className=e}else if(s&&n!==s)for(var d in s){var u=!!s[d];(n==null||u!==!!n[d])&&r.classList.toggle(d,u)}return s}function Ve(r,t,e,a){var n=r.__style;if(y||n!==t){var s=Ke(t);(!y||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=t}return a}var Ze=S('<div class="капля-wrapper svelte-3oqmuy"><div class="капля svelte-3oqmuy"></div></div>');function ze(r,t){let e=V(t,"onClick",8,()=>{});var a=Ze();re("click",a,function(...n){e()?.apply(this,n)}),O(r,a)}var Je=S('<div class="строка svelte-163v1ne"> </div>'),Qe=S("<div></div>");function We(r,t){J(t,!1);const e=B();let a=V(t,"text",8,""),n=V(t,"visible",8,!1),s=B([]);P(()=>j(a()),()=>{x(e,a().split("|"))}),P(()=>(j(n()),N(e)),()=>{n()?(x(s,[]),N(e).forEach((d,u)=>{setTimeout(()=>{x(s,N(e).slice(0,u+1))},u*800)})):x(s,[])}),Oe(),z();var l=Qe();let f;Ye(l,5,()=>N(s),Le,(d,u,m)=>{var g=Je();Ve(g,`animation-delay: ${m*.1}s`);var i=fe(g,!0);U(g),k(()=>de(i,N(u))),O(d,g)}),U(l),k(d=>f=Ue(l,1,"коан svelte-163v1ne",null,f,d),[()=>({показан:n()})]),O(r,l),Q()}var Xe=S('<div class="bg svelte-1ytyan9"></div>');function Pe(r){var t=Xe();O(r,t)}const ae=["Старый пруд…|прыгнула лягушка —|всплеск воды.","Капля|срывается —|и всё уже не то.","Ветер уносит|следы журавля —|тишина.","Мокрый бамбук|согнулся|и снова выпрямился.","Вечерний чай|в чашке|движется тенью."];function ke(r,t){J(t,!1);let e;te(()=>{e=new Audio("/audio/zen-loop.mp3"),e.loop=!0,e.volume=.4,e.play().catch(a=>{console.warn("Фоновая музыка не запущена автоматически (ограничения браузера)",a)})}),z(),Q()}var je=S('<!> <main class="svelte-6163q4"><!> <!> <!></main>',1);function la(r,t){J(t,!1);let e=B(""),a=B(!1),n;te(()=>{n=new Audio("/sounds/drop.mp3"),l()});function s(){n?.play(),l()}function l(){const _=ae[Math.floor(Math.random()*ae.length)];x(e,_),x(a,!0);const T=_.split("|").length*800+2e3;setTimeout(()=>{x(a,!1)},T)}z();var f=je(),d=Se(f);Pe(d);var u=$(d,2),m=fe(u);ze(m,{});var g=$(m,2);We(g,{get text(){return N(e)},get visible(){return N(a)}});var i=$(g,2);ke(i,{}),U(u),re("click",u,s),O(r,f),Q()}export{la as component};
